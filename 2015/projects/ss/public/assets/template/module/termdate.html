<div class="termdate controls list-group-item">
	<h5 class="control-label">
		{{moduleModel.settings.title}} <span class="label label-warning">必須</span>

		<div class="btn-group left_10px" ng-show="!isCompare()">
			<button type="button" class="btn btn-xs btn-default"
				ng-repeat="(key, name) in moduleModel.settings.master.report_term.summary"
				ng-model="moduleModel.settings.term_set" btn-radio="key" ng-click="setTerm(key)">
				{{name}}
			</button>
		</div>

		<button type="button" class="btn btn-xs btn-info left_10px" ng-show="isCompare()" ng-click="add()">
			<i class="glyphicon glyphicon-plus"></i> 期間を追加
		</button>

		<button type="button" class="btn btn-xs btn-default left_10px" ng-show="isCompare()" ng-click="reset()">
			<i class="glyphicon glyphicon-refresh"></i>
			期間をリセット
		</button>
	</h5>

	<div class="row term-input" id="term_input_{{$index}}"
		ng-repeat="termdate in moduleModel.term_arr | limitTo:moduleModel.settings.master.term_limit"
		tooltip="{{moduleModel.msg[$index]}}">

		<div class="number" ng-show="isCompare()">
			<label for="start_date" class="term-number label label-default pull-left">
				{{$index + 1}}
			</label>
		</div>

		<div class="col-sm-4">
			<div class="input-group">
				<input type="text" class="form-control" id="datepickerFrom" name="start_date[]"
					 ng-class="{invalid: moduleModel.msg[$index]}"
					 value="" placeholder="" ng-model="moduleModel.term_arr[$index].from"
					 ng-change="validate($index)" ng-required="true"
					 datepicker-popup="{{moduleModel.settings.datepicker.format}}"
					 datepicker-options="moduleModel.settings.datepicker"
					 is-open="moduleModel.status[$index].from" max-date="moduleModel.term_arr[$index].to"
				/>
				<span class="input-group-btn">
					<button type="button" class="btn btn-default" ng-click="open($event, $index, 'from')">
						<i class="glyphicon glyphicon-calendar"></i>
					</button>
				</span>
			</div>
		</div>

		<div class="term-icon">〜</div>

		<div class="col-sm-4">
			<div class="input-group">
				<input type="text" class="form-control" id="datepickerTo" name="end_date[]"
					 ng-class="{invalid: moduleModel.msg[$index]}"
					 value="" placeholder="" ng-model="moduleModel.term_arr[$index].to"
					 ng-change="validate($index)" ng-required="true"
					 datepicker-options="moduleModel.settings.datepicker"
					 datepicker-popup="{{moduleModel.settings.datepicker.format}}"
					 is-open="moduleModel.status[$index].to" min-date="moduleModel.term_arr[$index].from"
				/>
				<span class="input-group-btn">
					<button type="button" class="btn btn-default" ng-click="open($event, $index, 'to')">
						<i class="glyphicon glyphicon-calendar"></i>
					</button>
				</span>
			</div>
		</div>

		<div class="op-btn-area">
			<button type="button" class="btn btn-xs btn-default" ng-click="clear($index)">
				クリア
			</button>

			<button type="button" class="btn btn-xs btn-warning" ng-click="delete($index)" ng-show="$index > 0">
				<i class="glyphicon glyphicon-remove"></i>
				削除
			</button>
		</div>
	</div>

	<div class="compare-option" ng-show="isCompare()">
		<div class="row">
			<div class="col-sm-4">
				<select class="form-control input-sm" ng-model="moduleModel.settings.term_compare_set"
					ng-options="key as name for (key, name) in moduleModel.settings.master.report_term.term_compare"
					ng-change="setCompareTerms()">
						<option value="">比較する期間を指定できます</option>
				</select>
			</div>
		</div>
	</div>

	<div id="ssTermdateHiddens">
		<input type="hidden" name="term_count" value="{{moduleModel.term_count}}" ng-model="moduleModel.term_count">
	</div>
</div>